---
layout: post
title: Using Python to Access Web Data
date: 2020-09-11 13:32:20 +0300
description: Youâ€™ll find this post in your `_posts` directory. Go ahead and edit it and re-build the site to see your changes. # Add post description (optional)
fig-caption: # Add figcaption (optional)
tags: [python, coursera, course]
---
## Use-case 1: Extracting Data from JSON
In this use-case, we'll write a Python program prompting for an URL, reading the JSON data from that URL using *urllib* and then parsing and extracting the comment counts from the JSON data, computing the sum of the numbers in the file. 

### Data format
The data consists of a number of names and comment counts in JSON as follows:
```Json
{
  comments: [
    {
      name: "Matthias"
      count: 97
    },
    {
      name: "Geomer"
      count: 97
    }
    ...
  ]
}
```

### Solution
```python
import json
import urllib.request, urllib.parse, urllib.error
import ssl

# Ignore SSL certificate errors
ctx = ssl.create_default_context()
ctx.check_hostname = False
ctx.verify_mode = ssl.CERT_NONE

url = input('Enter location: ')
print('Retrieving', url)
handle = urllib.request.urlopen(url, context=ctx)

data = handle.read()
print('Retrieved', len(data), 'characters')

info = json.loads(data)
print(info)
comments = info['comments']
print('Comment count:', len(comments))

sum = 0
for comment in comments:
    sum += int(comment['count'])

print('Sum:', sum)
```

### Sample Execution
```bash
$ python3 solution.py
Enter location: http://py4e-data.dr-chuck.net/comments_42.json
Retrieving http://py4e-data.dr-chuck.net/comments_42.json
Retrieved 2733 characters
Count: 50
Sum: 2...
```